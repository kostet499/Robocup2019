<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>qi::MutableStore&lt; T, M &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div class="related">
  <ul>
    <!-- <li style="margin-right: 10px" class="right"> -->
    <!--   <a accesskey="I" title="General Index" href="genindex.html">index</a> -->
    <!-- </li> -->
    <!-- <li class="right"> -->
    <!--   <a accesskey="N" title="Whatâ€™s new?" href="news/whatsnew/index.html">next</a> | -->
    <!-- </li> -->
    <li><a href="../../index.html">Aldebaran documentation</a> |</li>
    <li><a href="../../ref/cpp-api.html">C++ Libraries</a> |</li>
    <li><a href="index.html">index</a></li>
  </ul>
</div>
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="width: 100%">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libqi-api
   &#160;<span id="projectnumber">2.8.2.12</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceqi.html">qi</a></li><li class="navelem"><a class="el" href="classqi_1_1MutableStore.html">MutableStore</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classqi_1_1MutableStore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">qi::MutableStore&lt; T, M &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="mutablestore_8hpp_source.html">mutablestore.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab99c336cd49ce13c2df6f6057f8e9ca1"><td class="memTemplParams" colspan="2">template&lt;typename U , typename  = traits::EnableIfNotBaseOf&lt;MutableStore, U&gt;&gt; </td></tr>
<tr class="memitem:ab99c336cd49ce13c2df6f6057f8e9ca1"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classqi_1_1MutableStore.html#ab99c336cd49ce13c2df6f6057f8e9ca1">MutableStore</a> (U &amp;&amp;u) <a class="el" href="macro_8hpp.html#aa8b7e5beb01f6bffafba9b468da19e91">QI_NOEXCEPT_EXPR</a>(variant_type(<a class="el" href="namespaceqi.html#aea73608226c5ebcb2ec776cb48326542">fwd</a>&lt; U &gt;(u)))</td></tr>
<tr class="separator:ab99c336cd49ce13c2df6f6057f8e9ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a150cac36bc8177b0e32486b7e8fd5d7a"><td class="memTemplParams" colspan="2">template&lt;typename U , typename  = traits::EnableIfNotBaseOf&lt;MutableStore, U&gt;&gt; </td></tr>
<tr class="memitem:a150cac36bc8177b0e32486b7e8fd5d7a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classqi_1_1MutableStore.html">MutableStore</a> &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classqi_1_1MutableStore.html#a150cac36bc8177b0e32486b7e8fd5d7a">operator=</a> (U &amp;&amp;u) <a class="el" href="macro_8hpp.html#aa8b7e5beb01f6bffafba9b468da19e91">QI_NOEXCEPT_EXPR</a>(data</td></tr>
<tr class="separator:a150cac36bc8177b0e32486b7e8fd5d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785c5770ac43d34a46ae462563c3e599"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqi_1_1MutableStore.html#a785c5770ac43d34a46ae462563c3e599">MutableStore</a> (const <a class="el" href="classqi_1_1MutableStore.html">MutableStore</a> &amp;x) <a class="el" href="macro_8hpp.html#aa8b7e5beb01f6bffafba9b468da19e91">QI_NOEXCEPT_EXPR</a>(variant_type(variant_type()))</td></tr>
<tr class="separator:a785c5770ac43d34a46ae462563c3e599"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T, typename M = T*&gt;<br/>
class qi::MutableStore&lt; T, M &gt;</h3>

<p>Dereferenceable type that contains a value or an indirection to an object.</p>
<p>Here the "indirection type" models the Mutable concept (see concept.hpp). It means that it can be dereferenced and the dereferenced value can be modified. If not specified, the "indirection type" is a pointer type (i.e. if the value type is <code>T</code>, it will be by default <code>T*</code>).</p>
<p>Useful if you want to act on a resource and knowing if it has a value semantics or an entity semantics is irrelevant.</p>
<p>This type itself models the concept Mutable (see concept.hpp). This means that it can be dereferenced and the dereferenced value can be modified.</p>
<p>On dereferencing:</p>
<ul>
<li>if the instance directly contains the value, a reference on it is returned.</li>
<li>if the instance contains an indirection to an object, the result of the dereferencing is returned.</li>
</ul>
<p>Example: Storing an integer or a pointer to an integer </p>
<div class="fragment"><div class="line">*  <span class="keyword">struct </span>X {</div>
<div class="line">*    MutableStore&lt;int, int*&gt; counter; <span class="comment">// owns an `int` or an `int*`.</span></div>
<div class="line">* </div>
<div class="line">*    <span class="keywordtype">void</span> increment() {</div>
<div class="line">*      <span class="comment">// Modifies the integer in `counter` or the integer pointed to by `counter`.</span></div>
<div class="line">*      <span class="comment">// In the latter case, it is the user&#39;s responsibility to ensure there</span></div>
<div class="line">*      <span class="comment">// is no data race.</span></div>
<div class="line">*      ++(*counter);</div>
<div class="line">*    }</div>
<div class="line">*  };</div>
<div class="line">* </div>
</div><!-- fragment --><p> Note: Typical "indirection types" for a value type T are: T*, std::unique_tr&lt;T&gt;, std::shared_ptr&lt;T&gt;, qi::ReferenceWrapper&lt;T&gt;</p>
<p>Note: If you use a move-only "indirection type" such as <code>std::unique_ptr</code> the resulting <code><a class="el" href="classqi_1_1MutableStore.html">MutableStore</a></code> will also be move-only.</p>
<p>Example: Using the same ssl context for all accepted sockets (server side) </p>
<div class="fragment"><div class="line">*  <span class="keyword">struct </span>SocketWithContext</div>
<div class="line">*  {</div>
<div class="line">*    Socket socket;</div>
<div class="line">*    MutableStore&lt;SslContext&gt; <a class="code" href="namespaceqi_1_1log.html#a8ba6e57339348f416dcb9b0f2019b01a">context</a>; <span class="comment">// Contains a SslContext or a SslContext*.</span></div>
<div class="line">*    <span class="comment">// ...</span></div>
<div class="line">*  };</div>
<div class="line">* </div>
<div class="line">*  <span class="comment">// `acceptedSocket` has type `Socket`.</span></div>
<div class="line">*  <span class="comment">// Here, the server maintains the ssl context and shares it between all</span></div>
<div class="line">*  <span class="comment">// accepted socket instances.</span></div>
<div class="line">*  <span class="keyword">auto</span> socketPtr = boost::make_shared&lt;SocketWithContext&gt;(acceptedSocket, &amp;sslContext);</div>
<div class="line">* </div>
</div><!-- fragment --><p>Example: Creating a new ssl context for each created socket (client side) </p>
<div class="fragment"><div class="line">*  <span class="keyword">struct </span>MessageSocket</div>
<div class="line">*  {</div>
<div class="line">*    SocketWithContext socket; <span class="comment">// see previous example</span></div>
<div class="line">*    <span class="comment">// other members...</span></div>
<div class="line">* </div>
<div class="line">*    MessageSocket()</div>
<div class="line">*      : socket(Socket{}, <a class="code" href="namespaceqi_1_1sock.html#a09f9faff42f311b6076f6684b4b9e4e8">SslContext</a>{SslContext::v23})</div>
<div class="line">*      <span class="comment">// ...</span></div>
<div class="line">*    {</div>
<div class="line">*      <span class="comment">// The ssl context is moved inside the `MutableStore` of `SocketWithContext`.</span></div>
<div class="line">*    }</div>
<div class="line">*  };</div>
<div class="line">* </div>
</div><!-- fragment --><p>Mutable&lt;T&gt; M </p>

<p>Definition at line <a class="el" href="mutablestore_8hpp_source.html#l00081">81</a> of file <a class="el" href="mutablestore_8hpp_source.html">mutablestore.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab99c336cd49ce13c2df6f6057f8e9ca1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename M  = T*&gt; </div>
<div class="memtemplate">
template&lt;typename U , typename  = traits::EnableIfNotBaseOf&lt;MutableStore, U&gt;&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classqi_1_1MutableStore.html">qi::MutableStore</a>&lt; T, M &gt;::<a class="el" href="classqi_1_1MutableStore.html">MutableStore</a> </td>
          <td>(</td>
          <td class="paramtype">U &amp;&amp;&#160;</td>
          <td class="paramname"><em>u</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>With U&amp;&amp; u, the following is valid: boost::variant&lt;M, T&gt;(fwd&lt;U&gt;(u)) </p>

<p>Definition at line <a class="el" href="mutablestore_8hpp_source.html#l00101">101</a> of file <a class="el" href="mutablestore_8hpp_source.html">mutablestore.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a785c5770ac43d34a46ae462563c3e599"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename M  = T*&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classqi_1_1MutableStore.html">qi::MutableStore</a>&lt; T, M &gt;::<a class="el" href="classqi_1_1MutableStore.html">MutableStore</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classqi_1_1MutableStore.html">MutableStore</a>&lt; T, M &gt; &amp;&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mutablestore_8hpp_source.html#l00118">118</a> of file <a class="el" href="mutablestore_8hpp_source.html">mutablestore.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a150cac36bc8177b0e32486b7e8fd5d7a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , typename M  = T*&gt; </div>
<div class="memtemplate">
template&lt;typename U , typename  = traits::EnableIfNotBaseOf&lt;MutableStore, U&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classqi_1_1MutableStore.html">MutableStore</a>&amp; <a class="el" href="classqi_1_1MutableStore.html">qi::MutableStore</a>&lt; T, M &gt;::operator= </td>
          <td>(</td>
          <td class="paramtype">U &amp;&amp;&#160;</td>
          <td class="paramname"><em>u</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>With boost::variant&lt;M, T&gt; v, U&amp;&amp; u, the following is valid: v = fwd&lt;U&gt;(u); </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/opennao/work/master/sdk/libqi/qi/<a class="el" href="mutablestore_8hpp_source.html">mutablestore.hpp</a></li>
</ul>
</div><!-- contents -->

<hr class="footer"/><address class="footer"><small>
Copyright Aldebaran Robotics
<!-- Generated on Tue May 15 2018 10:54:49 for libqi-api by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6</small></address> -->
</body>
</html>
